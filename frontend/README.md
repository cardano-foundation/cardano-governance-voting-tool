# Voting Frontend

The frontend for this voting tool is an [Elm][elm] application, based on the [elm-cardano][elm-cardano] framework.
It’s a non-conventional choice with tradeoffs, but also strong benefits, both for user experience and open contributions.
If you have any question about Elm or elm-cardano, don’t hesitate to ask them in the [`#elm` channel of TxPipe discord][elm-txpipe].
Any elm enthousiast there will happily answer them.

[elm]: https://elm-lang.org/
[elm-cardano]: https://github.com/elm-cardano/elm-cardano
[elm-txpipe]: https://discord.gg/xjbnyUpr8a

## Directory Overview

```sh
- elm-cardano/      # elm-cardano git submodule
- review/           # elm-review linter configuration
- src/              # source code for the elm app
- static/index.html # entry page of the elm app
- elm.json          # project config for the elm app
- elm-watch.json    # config for the hot-reload watcher
- package.json      # dev tools to install with NPM (also with lock file)
- ARCHITECTURE.md   # architecture design of the app code
- README.md         # you are reading it :)
# Other files will be generated by the different tools
```

For more info about the content of the app itself, please read the `ARCHITECTURE.md` document.

## Getting Started (code)

To build the frontend app, you will need to install [elm][elm] and [elm-cardano][elm-cardano], as well as other tools for the Elm language.
All of these can be installed directly with npm.

```sh
# Install locally elm, elm-cardano, elm-test, ...
cd frontend/
npm install
```

Once these dev tools are installed via npm, you can build the app by calling the `elm-cardano` command.

```sh
# (DON’T DO THIS) Build the app manually
npx elm-cardano make src/Main.elm --output static/main.js
# (DO THIS) Build the app with the npm script command
npm run make
```

## Documentation

To access locally the documentation of all the elm code in this project, as well as elm-cardano and all the dependencies we can use `elm-doc-preview`.

```sh
# (DON’T DO THIS) Start documentation server at port 8911
npx elm-doc-preview --port 8911
# (DO THIS) Start documentation server with the "docs" npm script
npm run docs
```

## Contributions

All shapes of contributions are very welcome!
Usually the best approach is to start by looking at or opening an issue on the GitHub repo.

The Elm code is formatted using `elm-format`.

```sh
# (DON’T DO THIS) Format the src/ directory with elm-format
npx elm-format src/
# (DO THIS) Format the code with the "format" npm script
npm run format
```

All the code is also statically analyzed ("linted") using `elm-review`.

```sh
# (DON’T DO THIS) Lint the code with elm-review
npx elm-review --fix
# (DO THIS) Use directly the "lint" npm script
npm run lint:fix
```
